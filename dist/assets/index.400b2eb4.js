import{m as a,r as e,f as s,M as l,O as o,E as t,n,s as i}from"./vendor.6c8c2553.js";import"./request.324758d0.js";/* empty css              */import{m as r}from"./md5.692fc149.js";/* empty css              *//* empty css              */import{N as d}from"./index.c77fe791.js";import{g as u,e as c,l as m}from"./user.154776ed.js";import"./index.57763f1b.js";/* empty css              */var p={name:"setting",setup(){const p=a(),v=e({introduceSign:"",loginName:"",nickName:"",passwordMd5:""}),f=e(!1),g=e(!1),y=async()=>{const{introduceSign:a,nickName:e,passwordMd5:s}=v.value;try{f.value=!0,await c({introduceSign:a,nickName:e,passwordMd5:""!==s.trim()?r(s):void 0}),i.success("保存成功")}catch(l){console.error("保存用户信息失败：",l)}finally{f.value=!1}},b=async()=>{try{g.value=!0,await m(),p.push("/login")}catch(a){console.error("退出登陆失败",a)}finally{g.value=!1}};return(async()=>{try{const a=(await u()).data;a&&(v.value=Object.assign(v.value,a,{passwordMd5:""}))}catch(a){console.error("获取用户信息失败",a)}})(),()=>s("div",{class:"setting-page"},[s(d,{title:"账号管理",leftArrow:!0},null),s(l,{inset:!0},{default:()=>[s(o,{label:"昵称",modelValue:v.value.nickName,"onUpdate:modelValue":a=>v.value.nickName=a},null),s(o,{label:"个性签名",modelValue:v.value.introduceSign,"onUpdate:modelValue":a=>v.value.introduceSign=a},null),s(o,{label:"修改密码",modelValue:v.value.passwordMd5,"onUpdate:modelValue":a=>v.value.passwordMd5=a},null)]}),s("div",{class:"setting-action"},[s(t,{round:!0,loading:f.value,block:!0,type:"primary","native-type":"submit",onClick:y},{default:()=>[n("保存")]}),s(t,{round:!0,block:!0,type:"danger","native-type":"submit",onClick:b},{default:()=>[n("退出登录")]})])])}};export{p as default};
