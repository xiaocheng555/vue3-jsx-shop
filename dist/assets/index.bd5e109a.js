import{u as e,m as a,r as o,e as l,v as r,f as t,E as s,n,F as d,A as i,$ as c,s as u,a0 as p}from"./vendor.6c8c2553.js";import"./request.324758d0.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{N as m}from"./index.c77fe791.js";import{a as f,p as b,b as v}from"./order.035fef5e.js";import{h as y}from"./index.b2344599.js";import"./index.57763f1b.js";/* empty css              */var g={name:"OrderDetail",setup(){const g=e();a();const j=o(!1),k=o({}),x=l((()=>String(g.query.orderNo))),h=async()=>{const e=u.loading("加载中...");try{const a=await f(x.value);k.value=a.data||{},console.log(k,"orderData")}catch(a){console.error("获取订单详情失败",a)}finally{e.clear()}},C=()=>{j.value=!0},w=async()=>{u.loading("支付中...");try{await b({orderNo:x.value,payType:1}),u.success("支付成功"),k.value.orderStatus=1,j.value=!1,h()}catch(e){u.fail("支付失败")}},S=()=>{p.confirm({title:"确定取消订单？"}).then((()=>{N()}))},N=async()=>{const e=u.loading("正在取消...");try{await v(x.value),k.value.orderStatus=-1,h()}catch(a){console.error("取消订单失败",a)}finally{e.clear()}};return r((()=>{h()})),()=>{const{newBeeMallOrderItemVOS:e,totalPrice:a,orderNo:o,createTime:l,orderStatusString:r,orderStatus:u}=k.value,p=e||[];let f;return 0===u?f=t(d,null,[t(s,{block:!0,type:"primary",onClick:C},{default:()=>[n("去支付")]}),t(s,{block:!0,onClick:S},{default:()=>[n("取消订单")]})]):1===u&&(f=t(d,null,[t(s,{block:!0,onClick:S},{default:()=>[n("取消订单")]})])),t("div",{class:"order-detail"},[t(m,{title:"订单详情",leftArrow:!0},null),t("div",{class:"order-content"},[t("p",null,[n("订单状态："),t("b",null,[r])]),t("p",null,[n("订单编号："),t("b",null,[o])]),t("p",null,[n("下单时间："),t("b",null,[l])]),f]),t("div",{class:"order-content"},[t("p",null,[n("商品金额："),a]),t("p",null,[n("配送方式：普通快递")])]),p.map((e=>t(i,{key:e.goodsId,num:e.goodsCount,price:e.sellingPrice,title:e.goodsName,thumb:y(e.goodsCoverImg)},null))),t(c,{class:"order-pay-popup2",closeOnClickOverlay:!1,closeable:!0,show:j.value,position:"bottom","onUpdate:show":()=>j.value=!j.value,teleport:"body"},{default:()=>[t(s,{type:"primary",block:!0,onClick:w},{default:()=>[n("支付宝支付")]}),t(s,{type:"success",block:!0,onClick:w},{default:()=>[n("微信支付")]})]})])}}};g.__scopeId="data-v-bb573ab4";export{g as default};
