import{N as e}from"./index.c77fe791.js";import{d as a,f as t,n as l,A as r,m as o,r as u,X as s,_ as d,i as n,Y as i,Z as v}from"./vendor.6c8c2553.js";/* empty css              *//* empty css              */import{g as c}from"./order.035fef5e.js";import{h as p}from"./index.b2344599.js";/* empty css              *//* empty css              */import"./request.324758d0.js";/* empty css              */import"./index.57763f1b.js";var m=a({name:"OrderItem",props:{data:{default:()=>{}}},setup(e){const{data:a}=e,o=a.newBeeMallOrderItemVOS||[];return()=>t("div",{class:"order-item"},[t("div",{class:"order-item-top"},[t("div",null,[l("订单时间："),a.createTime]),t("div",null,[a.orderStatusString])]),o.map((e=>t(r,{key:e.goodsId,num:e.goodsCount,price:e.sellingPrice,title:e.goodsName,thumb:p(e.goodsCoverImg)},null)))])}});m.__scopeId="data-v-861cae5e";var f=a({name:"OrderList",props:{status:{type:String,require:!0}},setup(e){const a=o(),l=u([]),r=u(0),i=u(!1),v=u(!1),p=u(!1),f=u(!1),b=async(a=!1)=>{var t;r.value++,i.value=!0;try{const o=await c({pageNumber:r.value,status:e.status});if(o.data){const e=o.data,r=(null==(t=o.data)?void 0:t.list)||[];a&&(l.value=[]),l.value.push(...r),p.value=e.currPage>=e.totalPage}else p.value=!0}catch(o){v.value=!0,console.error("获取订单数据失败",o)}finally{i.value=!1,f.value=!1}},g=()=>{r.value=0,v.value=!1,p.value=!1,b(!0)};return()=>{let e;return t("div",null,[t(s,{modelValue:f.value,"onUpdate:modelValue":e=>f.value=e,onRefresh:g},{default:()=>{return[t(d,{class:"search-list",loading:i.value,error:v.value,"error-text":"请求失败，点击重新加载",finished:p.value,"finished-text":"没有更多了","onUpdate:error":e=>v.value=e,"onUpdate:loading":e=>i.value=e,onLoad:b},(r=e=l.value.map((e=>t(m,{key:e.orderId,data:e,onClick:()=>(e=>{console.log(e,"order"),a.push(`/order/detail?orderNo=${e.orderNo}`)})(e)},null))),"function"==typeof r||"[object Object]"===Object.prototype.toString.call(r)&&!n(r)?e:{default:()=>[e]}))];var r}})])}}});const b=[{label:"全部",value:""},{label:"待付款",value:"0"},{label:"待确认",value:"1"},{label:"待发货",value:"2"},{label:"已发货",value:"3"},{label:"交易完成",value:"4"}];var g={name:"Order",setup(){const a=u("");return()=>{let l;return t("div",null,[t(e,{title:"我的订单",leftArrow:!0},null),t(i,{active:a.value,"onUpdate:active":e=>a.value=e},(r=l=b.map((e=>t(v,{key:e.value,title:e.label,name:e.value},{default:()=>[t(f,{status:e.value},null)]}))),"function"==typeof r||"[object Object]"===Object.prototype.toString.call(r)&&!n(r)?l:{default:()=>[l]}))]);var r}}};g.__scopeId="data-v-0feb5a10";export{g as default};
